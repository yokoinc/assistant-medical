<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr Grégory Cuffel - Médecin Généraliste Le Havre</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-user-md"></i>
                    <h1>Dr Grégory Cuffel</h1>
                    <p>Médecin Généraliste - Le Havre</p>
                </div>
                <nav class="nav">
                    <a href="#horaires">Horaires</a>
                    <a href="#urgences">Urgences</a>
                    <a href="#contact">Contact</a>
                    <a href="/login" class="btn-patient">Espace Patient</a>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <!-- Section Accueil -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h2>Bienvenue au Cabinet Médical</h2>
                    <p class="hero-text">
                        Consultations de médecine générale pour toute la famille. 
                        Prise en charge complète et accompagnement personnalisé.
                    </p>
                    <div class="hero-actions">
                        <a href="/login" class="btn btn-primary">
                            <i class="fas fa-comments"></i>
                            Accéder à l'Espace Patient
                        </a>
                        <a href="#contact" class="btn btn-secondary">
                            <i class="fas fa-phone"></i>
                            Prendre Rendez-vous
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Horaires -->
        <section id="horaires" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-clock"></i>
                    Horaires du Cabinet
                </h2>
                <div class="horaires-grid" id="horaires-content">
                    <!-- Chargé dynamiquement -->
                </div>
                <div class="info-box">
                    <i class="fas fa-info-circle"></i>
                    <p><strong>Consultations sur rendez-vous uniquement</strong></p>
                    <p>En cas d'urgence, contactez le 15 (SAMU)</p>
                </div>
            </div>
        </section>

        <!-- Section Urgences -->
        <section id="urgences" class="section section-urgences">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-ambulance"></i>
                    Numéros d'Urgence - Le Havre
                </h2>
                <div class="urgences-grid" id="urgences-content">
                    <!-- Chargé dynamiquement -->
                </div>
            </div>
        </section>

        <!-- Section Services -->
        <section class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-stethoscope"></i>
                    Services Proposés
                </h2>
                <div class="services-grid">
                    <div class="service-card">
                        <i class="fas fa-user-friends"></i>
                        <h3>Médecine Générale</h3>
                        <p>Consultations pour adultes et enfants, suivi médical personnalisé</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-syringe"></i>
                        <h3>Vaccinations</h3>
                        <p>Vaccins obligatoires et recommandés, carnets de vaccination</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-file-medical"></i>
                        <h3>Certificats Médicaux</h3>
                        <p>Certificats pour sport, travail, et démarches administratives</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-comments"></i>
                        <h3>Espace Patient</h3>
                        <p>Envoi de documents et messages sécurisés via votre espace privé</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section Contact -->
        <section id="contact" class="section">
            <div class="container">
                <h2 class="section-title">
                    <i class="fas fa-map-marker-alt"></i>
                    Contact & Localisation
                </h2>
                <div class="contact-grid">
                    <div class="contact-info" id="contact-content">
                        <!-- Chargé dynamiquement -->
                    </div>
                    <div class="contact-map">
                        <div class="map-placeholder">
                            <i class="fas fa-map"></i>
                            <p>Plan d'accès au cabinet</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Dr Grégory Cuffel</h4>
                    <p>Médecin Généraliste</p>
                    <p>Le Havre, Seine-Maritime</p>
                </div>
                <div class="footer-section">
                    <h4>Urgences 24h/24</h4>
                    <p><strong>SAMU :</strong> 15</p>
                    <p><strong>Pompiers :</strong> 18</p>
                    <p><strong>Police :</strong> 17</p>
                </div>
                <div class="footer-section">
                    <h4>Patients</h4>
                    <a href="/login">Espace Patient</a>
                    <a href="#horaires">Horaires</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Cabinet Dr Grégory Cuffel - Tous droits réservés</p>
            </div>
        </div>
    </footer>

    <script>
        // Chargement des informations du cabinet
        async function loadCabinetInfo() {
            try {
                const response = await fetch('/api/cabinet-info');
                const data = await response.json();
                
                // Affichage des horaires
                const horairesContent = document.getElementById('horaires-content');
                let horairesHTML = '<div class="horaires-list">';
                for (const [jour, horaire] of Object.entries(data.horaires)) {
                    const isToday = new Date().toLocaleDateString('fr-FR', { weekday: 'long' }).toLowerCase() === jour.toLowerCase();
                    horairesHTML += `
                        <div class="horaire-item ${isToday ? 'today' : ''}">
                            <span class="jour">${jour}</span>
                            <span class="heure">${horaire}</span>
                        </div>
                    `;
                }
                horairesHTML += '</div>';
                horairesContent.innerHTML = horairesHTML;

                // Affichage des informations de contact
                const contactContent = document.getElementById('contact-content');
                contactContent.innerHTML = `
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <strong>Téléphone</strong>
                            <p>${data.contact.telephone}</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <div>
                            <strong>Email</strong>
                            <p>${data.contact.email}</p>
                        </div>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <div>
                            <strong>Adresse</strong>
                            <p>${data.contact.adresse}</p>
                        </div>
                    </div>
                    <div class="info-list">
                        ${Object.entries(data.infos).map(([key, value]) => `
                            <div class="info-item">
                                <strong>${key}:</strong> ${value}
                            </div>
                        `).join('')}
                    </div>
                `;

            } catch (error) {
                console.error('Erreur chargement infos cabinet:', error);
            }
        }

        // Chargement des numéros d'urgence
        async function loadUrgences() {
            try {
                const response = await fetch('/api/urgences');
                const urgences = await response.json();
                
                const urgencesContent = document.getElementById('urgences-content');
                urgencesContent.innerHTML = urgences.map(urgence => `
                    <div class="urgence-card ${urgence.type}">
                        <div class="urgence-header">
                            <i class="fas fa-phone-alt"></i>
                            <h3>${urgence.nom}</h3>
                        </div>
                        <div class="urgence-phone">${urgence.telephone}</div>
                        ${urgence.adresse ? `<p class="urgence-address">${urgence.adresse}</p>` : ''}
                        ${urgence.horaires ? `<p class="urgence-hours">${urgence.horaires}</p>` : ''}
                        ${urgence.site_web ? `<a href="${urgence.site_web}" target="_blank" class="urgence-link">Site web</a>` : ''}
                    </div>
                `).join('');

            } catch (error) {
                console.error('Erreur chargement urgences:', error);
            }
        }

        // Navigation fluide
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Chargement initial
        document.addEventListener('DOMContentLoaded', () => {
            loadCabinetInfo();
            loadUrgences();
        });
    </script>
</body>
</html>